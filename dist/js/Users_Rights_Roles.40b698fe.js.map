{"version":3,"sources":["webpack:///./src/components/user/Users.vue?7efb","webpack:///src/components/user/Users.vue","webpack:///./src/components/user/Users.vue?4c99","webpack:///./src/components/user/Users.vue","webpack:///./src/components/power/Roles.vue?8365","webpack:///src/components/power/Roles.vue","webpack:///./src/components/power/Roles.vue?5f8a","webpack:///./src/components/power/Roles.vue","webpack:///./src/components/power/Roles.vue?fdf9","webpack:///./src/components/power/Rights.vue?e95a","webpack:///src/components/power/Rights.vue","webpack:///./src/components/power/Rights.vue?9382","webpack:///./src/components/power/Rights.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","path","_v","on","getUserList","model","value","queryInfo","callback","$$v","$set","expression","slot","$event","addDialogVisible","userList","scopedSlots","_u","key","fn","scope","userStateChanged","row","showEditDialog","id","removeUserById","setRole","pagenum","pagesize","total","handleSizeChange","handleCurrentChange","addDialogClosed","ref","addForm","addFormRules","staticClass","editDialogVisible","editDialogClosed","editForm","editFormRules","editUserInfo","setRoleDialogVisible","setRoleDialogClosed","_s","userInfo","username","role_name","selectedRoleId","_l","item","roleName","saveRoleInfo","staticRenderFns","data","checkEmail","regEmail","test","cb","Error","checkMobile","regMobile","query","password","email","mobile","rolesList","created","methods","newSize","newPage","$refs","addFormRef","resetFields","addUser","validate","editFormRef","component","addRoleDialogVisible","rolelist","item1","i1","class","removeRightById","authName","item2","i2","item3","removeRoleById","showSetRightDialog","addRoleDialogClosed","addRoleForm","addRoleFormRules","addRole","editRoleDialogVisible","editRoleDialogClosed","editRoleForm","editRoleFormRules","editRole","setRightDialogVisible","setRightDialogClosed","rightslist","treeProps","defKeys","allotRights","label","children","roleId","roleDesc","getRolesList","getLeafKeys","node","arr","push","forEach","addRoleFormRef","editRoleFormRef","rightsList","level","getRightsList"],"mappings":"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","file":"js/Users_Rights_Roles.40b698fe.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"用户管理\")]),_c('el-breadcrumb-item',[_vm._v(\"用户列表\")])],1),_c('el-card',[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":8}},[_c('el-input',{attrs:{\"placeholder\":\"请输入内容\",\"clearable\":\"\"},on:{\"clear\":_vm.getUserList},model:{value:(_vm.queryInfo.query),callback:function ($$v) {_vm.$set(_vm.queryInfo, \"query\", $$v)},expression:\"queryInfo.query\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.getUserList},slot:\"append\"})],1)],1),_c('el-col',{attrs:{\"span\":4}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.addDialogVisible = true}}},[_vm._v(\"添加用户\")])],1)],1),_c('el-table',{attrs:{\"data\":_vm.userList,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\"}}),_c('el-table-column',{attrs:{\"label\":\"姓名\",\"prop\":\"username\"}}),_c('el-table-column',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}}),_c('el-table-column',{attrs:{\"label\":\"电话\",\"prop\":\"mobile\"}}),_c('el-table-column',{attrs:{\"label\":\"角色\",\"prop\":\"role_name\"}}),_c('el-table-column',{attrs:{\"label\":\"状态\",\"prop\":\"mg_state\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{on:{\"change\":function($event){return _vm.userStateChanged(scope.row)}},model:{value:(scope.row.mg_state),callback:function ($$v) {_vm.$set(scope.row, \"mg_state\", $$v)},expression:\"scope.row.mg_state\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"180px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.showEditDialog(scope.row.id)}}}),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.removeUserById(scope.row.id)}}}),_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"content\":\"分配角色\",\"placement\":\"top\",\"enterable\":false}},[_c('el-button',{attrs:{\"type\":\"warning\",\"icon\":\"el-icon-setting\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.setRole(scope.row)}}})],1)]}}])})],1),_c('el-pagination',{attrs:{\"current-page\":_vm.queryInfo.pagenum,\"page-sizes\":[1, 2, 5, 10],\"page-size\":_vm.queryInfo.pagesize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":\"添加用户\",\"visible\":_vm.addDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.addDialogVisible=$event},\"close\":_vm.addDialogClosed}},[_c('el-form',{ref:\"addFormRef\",attrs:{\"model\":_vm.addForm,\"rules\":_vm.addFormRules,\"label-width\":\"70px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{model:{value:(_vm.addForm.username),callback:function ($$v) {_vm.$set(_vm.addForm, \"username\", $$v)},expression:\"addForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{model:{value:(_vm.addForm.password),callback:function ($$v) {_vm.$set(_vm.addForm, \"password\", $$v)},expression:\"addForm.password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.addForm.email),callback:function ($$v) {_vm.$set(_vm.addForm, \"email\", $$v)},expression:\"addForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.addForm.mobile),callback:function ($$v) {_vm.$set(_vm.addForm, \"mobile\", $$v)},expression:\"addForm.mobile\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.addDialogVisible = false}}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"修改用户\",\"visible\":_vm.editDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.editDialogVisible=$event},\"close\":_vm.editDialogClosed}},[_c('el-form',{ref:\"editFormRef\",attrs:{\"model\":_vm.editForm,\"rules\":_vm.editFormRules,\"label-width\":\"70px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.editForm.username),callback:function ($$v) {_vm.$set(_vm.editForm, \"username\", $$v)},expression:\"editForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.editForm.email),callback:function ($$v) {_vm.$set(_vm.editForm, \"email\", $$v)},expression:\"editForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.editForm.mobile),callback:function ($$v) {_vm.$set(_vm.editForm, \"mobile\", $$v)},expression:\"editForm.mobile\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.editUserInfo}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"分配角色\",\"visible\":_vm.setRoleDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.setRoleDialogVisible=$event},\"close\":_vm.setRoleDialogClosed}},[_c('div',[_c('p',[_vm._v(\"当前的用户: \"+_vm._s(_vm.userInfo.username))]),_c('p',[_vm._v(\"当前的角色: \"+_vm._s(_vm.userInfo.role_name))]),_c('p',[_vm._v(\" 分配新角色: \"),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.selectedRoleId),callback:function ($$v) {_vm.selectedRoleId=$$v},expression:\"selectedRoleId\"}},_vm._l((_vm.rolesList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.roleName,\"value\":item.id}})}),1)],1)]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.setRoleDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveRoleInfo}},[_vm._v(\"确 定\")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 面包屑导航区域 -->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>用户管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>用户列表</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n\r\n    <!-- 卡片视图区域 -->\r\n    <el-card>\r\n      <!-- 搜索与添加区域 -->\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"8\">\r\n          <el-input placeholder=\"请输入内容\" v-model=\"queryInfo.query\" clearable @clear=\"getUserList\">\r\n            <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getUserList\"></el-button>\r\n          </el-input>\r\n        </el-col>\r\n        <el-col :span=\"4\">\r\n          <el-button type=\"primary\" @click=\"addDialogVisible = true\">添加用户</el-button>\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <!-- 用户列表区域 -->\r\n      <el-table :data=\"userList\" border stripe>\r\n        <el-table-column type=\"index\"></el-table-column>\r\n        <el-table-column label=\"姓名\" prop=\"username\"></el-table-column>\r\n        <el-table-column label=\"邮箱\" prop=\"email\"></el-table-column>\r\n        <el-table-column label=\"电话\" prop=\"mobile\"></el-table-column>\r\n        <el-table-column label=\"角色\" prop=\"role_name\"></el-table-column>\r\n        <el-table-column label=\"状态\" prop=\"mg_state\">\r\n          <template slot-scope=\"scope\">\r\n            <el-switch v-model=\"scope.row.mg_state\" @change=\"userStateChanged(scope.row)\"> </el-switch>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" width=\"180px\">\r\n          <template slot-scope=\"scope\">\r\n            <!-- 修改按钮 -->\r\n            <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"showEditDialog(scope.row.id)\"></el-button>\r\n            <!-- 删除按钮 -->\r\n            <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"removeUserById(scope.row.id)\"></el-button>\r\n            <!-- 分配角色按钮 -->\r\n            <el-tooltip effect=\"dark\" content=\"分配角色\" placement=\"top\" :enterable=\"false\">\r\n              <el-button type=\"warning\" icon=\"el-icon-setting\" size=\"mini\" @click=\"setRole(scope.row)\"></el-button>\r\n            </el-tooltip>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 分页区域 -->\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"queryInfo.pagenum\"\r\n        :page-sizes=\"[1, 2, 5, 10]\"\r\n        :page-size=\"queryInfo.pagesize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\"\r\n      >\r\n      </el-pagination>\r\n    </el-card>\r\n\r\n    <!-- 添加用户的对话框 -->\r\n    <el-dialog title=\"添加用户\" :visible.sync=\"addDialogVisible\" width=\"50%\" @close=\"addDialogClosed\">\r\n      <!-- 内容主体区域 -->\r\n      <el-form :model=\"addForm\" :rules=\"addFormRules\" ref=\"addFormRef\" label-width=\"70px\">\r\n        <el-form-item label=\"用户名\" prop=\"username\">\r\n          <el-input v-model=\"addForm.username\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" prop=\"password\">\r\n          <el-input v-model=\"addForm.password\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"邮箱\" prop=\"email\">\r\n          <el-input v-model=\"addForm.email\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"手机\" prop=\"mobile\">\r\n          <el-input v-model=\"addForm.mobile\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <!-- 底部区域 -->\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"addDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"addDialogVisible = false\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- 修改用户的对话框 -->\r\n    <el-dialog title=\"修改用户\" :visible.sync=\"editDialogVisible\" width=\"50%\" @close=\"editDialogClosed\">\r\n      <el-form :model=\"editForm\" :rules=\"editFormRules\" ref=\"editFormRef\" label-width=\"70px\">\r\n        <el-form-item label=\"用户名\">\r\n          <el-input v-model=\"editForm.username\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"邮箱\" prop=\"email\">\r\n          <el-input v-model=\"editForm.email\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"手机\" prop=\"mobile\">\r\n          <el-input v-model=\"editForm.mobile\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"editDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"editUserInfo\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- 分配角色的对话框  -->\r\n    <el-dialog title=\"分配角色\" :visible.sync=\"setRoleDialogVisible\" width=\"50%\" @close=\"setRoleDialogClosed\">\r\n      <div>\r\n        <p>当前的用户: {{ userInfo.username }}</p>\r\n        <p>当前的角色: {{ userInfo.role_name }}</p>\r\n        <p>\r\n          分配新角色:\r\n          <el-select v-model=\"selectedRoleId\" placeholder=\"请选择\">\r\n            <el-option v-for=\"item in rolesList\" :key=\"item.id\" :label=\"item.roleName\" :value=\"item.id\"> </el-option>\r\n          </el-select>\r\n        </p>\r\n      </div>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"setRoleDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"saveRoleInfo\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    // 验证邮箱的规则\r\n    var checkEmail = (rule, value, cb) => {\r\n      // 验证邮箱正则表达式\r\n      const regEmail = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\\.[a-zA-Z0-9_-])+/\r\n\r\n      if (regEmail.test(value)) {\r\n        // 合法的邮箱\r\n        return cb()\r\n      }\r\n\r\n      cb(new Error('请输入合法的邮箱'))\r\n    }\r\n    // 验证手机号的规则\r\n    var checkMobile = (rule, value, cb) => {\r\n      // 验证手机号的正则表达式\r\n      const regMobile = /^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/\r\n\r\n      if (regMobile.test(value)) {\r\n        return cb()\r\n      }\r\n\r\n      cb(new Error('请输入合法的手机号'))\r\n    }\r\n    return {\r\n      // 获取用户列表的参数对象\r\n      queryInfo: {\r\n        query: '',\r\n        // 当前的页数\r\n        pagenum: 1,\r\n        // 当前每页显示多少条数据\r\n        pagesize: 2\r\n      },\r\n      userList: [],\r\n      total: 0,\r\n      // 控制添加用户对话框的显示与隐藏\r\n      addDialogVisible: false,\r\n      // 添加用户的表单数据\r\n      addForm: {\r\n        username: '',\r\n        password: '',\r\n        email: '',\r\n        mobile: ''\r\n      },\r\n      // 添加表单的验证规则对象\r\n      addFormRules: {\r\n        username: [\r\n          { required: true, message: '请输入用户名', trigger: 'blur' },\r\n          {\r\n            min: 3,\r\n            max: 10,\r\n            message: '用户名的长度在3~10个字符之间',\r\n            trigger: 'blur'\r\n          }\r\n        ],\r\n        password: [\r\n          { required: true, message: '请输入密码', trigger: 'blur' },\r\n          {\r\n            min: 6,\r\n            max: 15,\r\n            message: '用户名的长度在6~15个字符之间',\r\n            trigger: 'blur'\r\n          }\r\n        ],\r\n        email: [\r\n          { required: true, message: '请输入邮箱', trigger: 'blur' },\r\n          { validator: checkEmail, trigger: 'blur' }\r\n        ],\r\n        mobile: [\r\n          { required: true, message: '请输入手机号', trigger: 'blur' },\r\n          { validator: checkMobile, trigger: 'blur' }\r\n        ]\r\n      },\r\n      // 控制修改用户对话框的显示与隐藏\r\n      editDialogVisible: false,\r\n      // 查询到的用户信息对象\r\n      editForm: {},\r\n      // 修改表单的验证规则对象\r\n      editFormRules: {\r\n        email: [\r\n          { required: true, message: '请输入用户邮箱', trigger: 'blur' },\r\n          { validator: checkEmail, trigger: 'blur' }\r\n        ],\r\n        mobile: [\r\n          { required: true, message: '请输入用户手机', trigger: 'blur' },\r\n          { validator: checkMobile, trigger: 'blur' }\r\n        ]\r\n      },\r\n      // 控制分配角色对话框的显示与隐藏\r\n      setRoleDialogVisible: false,\r\n      // 需要被分配角色的用户信息\r\n      userInfo: {},\r\n      // 所有角色的数据列表\r\n      rolesList: [],\r\n      // 已选择的角色Id值\r\n      selectedRoleId: ''\r\n    }\r\n  },\r\n  created() {\r\n    this.getUserList()\r\n  },\r\n  methods: {\r\n    async getUserList() {\r\n      const { data: res } = await this.$http.get('users', {\r\n        params: this.queryInfo\r\n      })\r\n      if (res.meta.status !== 200) {\r\n        return this.$message.error('获取管理员列表失败!')\r\n      }\r\n      this.userList = res.data.users\r\n      this.total = res.data.total\r\n      // console.log(res)\r\n    },\r\n    // 监听 pagesize 改变的事件\r\n    handleSizeChange(newSize) {\r\n      // console.log(newSize);\r\n      this.queryInfo.pagesize = newSize\r\n      this.getUserList()\r\n    },\r\n    // 监听 页码值 改变的事件\r\n    handleCurrentChange(newPage) {\r\n      // console.log(newPage);\r\n      this.queryInfo.pagenum = newPage\r\n      this.getUserList()\r\n    },\r\n    // 监听 switch 开关状态的改变\r\n    async userStateChanged(userinfo) {\r\n      // console.log(userinfo);\r\n      const { data: res } = await this.$http.put(`users/${userinfo.id}/state/${userinfo.mg_state}`)\r\n      if (res.meta.status !== 200) {\r\n        userinfo.mg_state = !userinfo.mg_state\r\n        return this.$message.error('更新用户状态失败')\r\n      }\r\n      this.$message.success('更新用户状态成功')\r\n    },\r\n    // 监听添加用户对话框的关闭事件\r\n    addDialogClosed() {\r\n      this.$refs.addFormRef.resetFields()\r\n    },\r\n    // 点击按钮，添加新用户\r\n    addUser() {\r\n      this.$refs.addFormRef.validate(async valid => {\r\n        if (!valid) return\r\n        // 可以发起添加用户的网络请求\r\n        const { data: res } = await this.$http.post('users', this.addForm)\r\n\r\n        if (res.meta.status !== 201) {\r\n          this.$message.error('添加用户失败！')\r\n        }\r\n\r\n        this.$message.success('添加用户成功！')\r\n        // 隐藏添加用户的对话框\r\n        this.addDialogVisible = false\r\n        // 重新获取用户列表数据\r\n        this.getUserList()\r\n      })\r\n    },\r\n    // 展示编辑用户的对话框\r\n    async showEditDialog(id) {\r\n      // console.log(id)\r\n      const { data: res } = await this.$http.get('users/' + id)\r\n\r\n      if (res.meta.status !== 200) {\r\n        return this.$message.error('查询用户信息失败！')\r\n      }\r\n\r\n      this.editForm = res.data\r\n      this.editDialogVisible = true\r\n    },\r\n    // 监听修改用户对话框的关闭事件\r\n    editDialogClosed() {\r\n      this.$refs.editFormRef.resetFields()\r\n    },\r\n    // 修改用户信息并提交\r\n    editUserInfo() {\r\n      this.$refs.editFormRef.validate(async valid => {\r\n        if (!valid) return\r\n        // 发起修改用户信息的数据请求\r\n        const { data: res } = await this.$http.put('users/' + this.editForm.id, {\r\n          email: this.editForm.email,\r\n          mobile: this.editForm.mobile\r\n        })\r\n\r\n        if (res.meta.status !== 200) {\r\n          return this.$message.error('更新用户信息失败！')\r\n        }\r\n\r\n        // 关闭对话框\r\n        this.editDialogVisible = false\r\n        // 刷新数据列表\r\n        this.getUserList()\r\n        // 提示修改成功\r\n        this.$message.success('更新用户信息成功！')\r\n      })\r\n    },\r\n    // 根据Id删除对应的用户信息\r\n    async removeUserById(id) {\r\n      // 弹框询问用户是否删除数据\r\n      const confirmResult = await this.$confirm('此操作将永久删除该用户, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).catch(err => err)\r\n\r\n      // 如果用户确认删除，则返回值为字符串 confirm\r\n      // 如果用户取消了删除，则返回值为字符串 cancel\r\n      // console.log(confirmResult)\r\n      if (confirmResult !== 'confirm') {\r\n        return this.$message.info('已取消删除')\r\n      }\r\n\r\n      const { data: res } = await this.$http.delete('users/' + id)\r\n\r\n      if (res.meta.status !== 200) {\r\n        return this.$message.error('删除用户失败！')\r\n      }\r\n\r\n      this.$message.success('删除用户成功！')\r\n      this.getUserList()\r\n    },\r\n    // 展示分配角色的对话框\r\n    async setRole(userInfo) {\r\n      this.userInfo = userInfo\r\n\r\n      // 在展示对话框之前，获取所有角色的列表\r\n      const { data: res } = await this.$http.get('roles')\r\n      if (res.meta.status !== 200) {\r\n        return this.$message.error('获取角色列表失败!')\r\n      }\r\n\r\n      this.rolesList = res.data\r\n\r\n      this.setRoleDialogVisible = true\r\n    },\r\n    // 点击按钮，分配角色\r\n    async saveRoleInfo() {\r\n      if (!this.selectedRoleId) {\r\n        return this.$message.error('请选择要分配的角色!')\r\n      }\r\n\r\n      const { data: res } = await this.$http.put(`users/${this.userInfo.id}/role`, {\r\n        rid: this.selectedRoleId\r\n      })\r\n\r\n      if (res.meta.status !== 200) {\r\n        return this.$message.error('更新角色失败!')\r\n      }\r\n\r\n      this.$message.success('更新角色成功!')\r\n      this.getUserList()\r\n      this.setRoleDialogVisible = false\r\n    },\r\n    // 监听分配角色对话框的关闭事件\r\n    setRoleDialogClosed() {\r\n      this.selectedRoleId = ''\r\n      this.userInfo = {}\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped></style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Users.vue?vue&type=template&id=4405074a&scoped=true&\"\nimport script from \"./Users.vue?vue&type=script&lang=js&\"\nexport * from \"./Users.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4405074a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"权限管理\")]),_c('el-breadcrumb-item',[_vm._v(\"角色列表\")])],1),_c('el-card',[_c('el-row',[_c('el-col',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.addRoleDialogVisible = true}}},[_vm._v(\"添加角色\")])],1)],1)],1),_c('el-table',{attrs:{\"data\":_vm.rolelist,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"expand\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _vm._l((scope.row.children),function(item1,i1){return _c('el-row',{key:item1.id,class:['bdbottom', i1 === 0 ? 'bdtop' : '', 'vcenter']},[_c('el-col',{attrs:{\"span\":5}},[_c('el-tag',{attrs:{\"closable\":\"\"},on:{\"close\":function($event){return _vm.removeRightById(scope.row, item1.id)}}},[_vm._v(_vm._s(item1.authName))]),_c('i',{staticClass:\"el-icon-caret-right\"})],1),_c('el-col',{attrs:{\"span\":19}},_vm._l((item1.children),function(item2,i2){return _c('el-row',{key:item2.id,class:[i2 === 0 ? '' : 'bdtop', 'vcenter']},[_c('el-col',{attrs:{\"span\":6}},[_c('el-tag',{attrs:{\"type\":\"success\",\"closable\":\"\"},on:{\"close\":function($event){return _vm.removeRightById(scope.row, item2.id)}}},[_vm._v(_vm._s(item2.authName))]),_c('i',{staticClass:\"el-icon-caret-right\"})],1),_c('el-col',{attrs:{\"span\":18}},_vm._l((item2.children),function(item3){return _c('el-tag',{key:item3.id,attrs:{\"type\":\"warning\",\"closable\":\"\"},on:{\"close\":function($event){return _vm.removeRightById(scope.row, item3.id)}}},[_vm._v(_vm._s(item3.authName))])}),1)],1)}),1)],1)})}}])}),_c('el-table-column',{attrs:{\"type\":\"index\"}}),_c('el-table-column',{attrs:{\"label\":\"角色名称\",\"prop\":\"roleName\"}}),_c('el-table-column',{attrs:{\"label\":\"角色描述\",\"prop\":\"roleDesc\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"300px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\",\"icon\":\"el-icon-edit\"},on:{\"click\":function($event){return _vm.showEditDialog(scope.row.id)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){return _vm.removeRoleById(scope.row.id)}}},[_vm._v(\"删除\")]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"warning\",\"icon\":\"el-icon-setting\"},on:{\"click\":function($event){return _vm.showSetRightDialog(scope.row)}}},[_vm._v(\"分配权限\")])]}}])})],1),_c('el-dialog',{attrs:{\"title\":\"添加角色\",\"width\":\"50%\",\"visible\":_vm.addRoleDialogVisible,\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.addRoleDialogVisible=$event},\"close\":_vm.addRoleDialogClosed}},[_c('el-form',{ref:\"addRoleFormRef\",attrs:{\"model\":_vm.addRoleForm,\"rules\":_vm.addRoleFormRules,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"角色名称\",\"prop\":\"roleName\"}},[_c('el-input',{model:{value:(_vm.addRoleForm.roleName),callback:function ($$v) {_vm.$set(_vm.addRoleForm, \"roleName\", $$v)},expression:\"addRoleForm.roleName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"角色描述\",\"prop\":\"roleDesc\"}},[_c('el-input',{model:{value:(_vm.addRoleForm.roleDesc),callback:function ($$v) {_vm.$set(_vm.addRoleForm, \"roleDesc\", $$v)},expression:\"addRoleForm.roleDesc\"}})],1)],1),_c('span',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addRoleDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addRole}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"修改角色\",\"width\":\"50%\",\"visible\":_vm.editRoleDialogVisible,\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.editRoleDialogVisible=$event},\"close\":_vm.editRoleDialogClosed}},[_c('el-form',{ref:\"editRoleFormRef\",attrs:{\"model\":_vm.editRoleForm,\"rules\":_vm.editRoleFormRules,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"角色名称\",\"prop\":\"roleName\"}},[_c('el-input',{model:{value:(_vm.editRoleForm.roleName),callback:function ($$v) {_vm.$set(_vm.editRoleForm, \"roleName\", $$v)},expression:\"editRoleForm.roleName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"角色描述\",\"prop\":\"roleDesc\"}},[_c('el-input',{model:{value:(_vm.editRoleForm.roleDesc),callback:function ($$v) {_vm.$set(_vm.editRoleForm, \"roleDesc\", $$v)},expression:\"editRoleForm.roleDesc\"}})],1)],1),_c('span',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editRoleDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.editRole}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"分配权限\",\"visible\":_vm.setRightDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.setRightDialogVisible=$event},\"close\":_vm.setRightDialogClosed}},[_c('el-tree',{ref:\"treeRef\",attrs:{\"data\":_vm.rightslist,\"props\":_vm.treeProps,\"show-checkbox\":\"\",\"node-key\":\"id\",\"default-expand-all\":\"\",\"default-checked-keys\":_vm.defKeys}}),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.setRightDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.allotRights}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 面包屑导航区 -->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>权限管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>角色列表</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n\r\n    <!-- 卡片视图区域 -->\r\n    <el-card>\r\n      <!-- 添加角色按钮区域 -->\r\n      <el-row>\r\n        <el-col>\r\n          <el-button type=\"primary\" @click=\"addRoleDialogVisible = true\">添加角色</el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </el-card>\r\n\r\n    <!-- 角色列表区域 -->\r\n    <el-table :data=\"rolelist\" border stripe>\r\n      <!-- 展开列 -->\r\n      <el-table-column type=\"expand\">\r\n        <template slot-scope=\"scope\">\r\n          <el-row :class=\"['bdbottom', i1 === 0 ? 'bdtop' : '', 'vcenter']\" v-for=\"(item1, i1) in scope.row.children\" :key=\"item1.id\">\r\n            <!-- 渲染一级权限 -->\r\n            <el-col :span=\"5\">\r\n              <el-tag closable @close=\"removeRightById(scope.row, item1.id)\">{{ item1.authName }}</el-tag>\r\n              <i class=\"el-icon-caret-right\"></i>\r\n            </el-col>\r\n            <!-- 渲染二级和三级权限 -->\r\n            <el-col :span=\"19\">\r\n              <!-- 通过 for 循环 嵌套渲染二级权限 -->\r\n              <el-row :class=\"[i2 === 0 ? '' : 'bdtop', 'vcenter']\" v-for=\"(item2, i2) in item1.children\" :key=\"item2.id\">\r\n                <el-col :span=\"6\">\r\n                  <el-tag type=\"success\" closable @close=\"removeRightById(scope.row, item2.id)\">{{ item2.authName }}</el-tag>\r\n                  <i class=\"el-icon-caret-right\"></i>\r\n                </el-col>\r\n                <el-col :span=\"18\">\r\n                  <el-tag type=\"warning\" v-for=\"item3 in item2.children\" :key=\"item3.id\" closable @close=\"removeRightById(scope.row, item3.id)\">{{ item3.authName }}</el-tag>\r\n                </el-col>\r\n              </el-row>\r\n            </el-col>\r\n          </el-row>\r\n\r\n          <!-- <pre>\r\n            {{scope.row}}\r\n          </pre> -->\r\n        </template>\r\n      </el-table-column>\r\n      <!-- 索引列 -->\r\n      <el-table-column type=\"index\"></el-table-column>\r\n      <el-table-column label=\"角色名称\" prop=\"roleName\"></el-table-column>\r\n      <el-table-column label=\"角色描述\" prop=\"roleDesc\"></el-table-column>\r\n      <el-table-column label=\"操作\" width=\"300px\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button size=\"mini\" type=\"primary\" icon=\"el-icon-edit\" @click=\"showEditDialog(scope.row.id)\">编辑</el-button>\r\n          <el-button size=\"mini\" type=\"danger\" icon=\"el-icon-delete\" @click=\"removeRoleById(scope.row.id)\">删除</el-button>\r\n          <el-button size=\"mini\" type=\"warning\" icon=\"el-icon-setting\" @click=\"showSetRightDialog(scope.row)\">分配权限</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!--添加角色的对话框-->\r\n    <el-dialog title=\"添加角色\" width=\"50%\" :visible.sync=\"addRoleDialogVisible\" :close-on-click-modal=\"false\" @close=\"addRoleDialogClosed\">\r\n      <!--内容主体-->\r\n      <el-form :model=\"addRoleForm\" :rules=\"addRoleFormRules\" ref=\"addRoleFormRef\" label-width=\"80px\">\r\n        <el-form-item label=\"角色名称\" prop=\"roleName\">\r\n          <el-input v-model=\"addRoleForm.roleName\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"角色描述\" prop=\"roleDesc\">\r\n          <el-input v-model=\"addRoleForm.roleDesc\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <!--底部-->\r\n      <span slot=\"footer\">\r\n        <el-button @click=\"addRoleDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"addRole\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!--修改角色的对话框-->\r\n    <el-dialog title=\"修改角色\" width=\"50%\" :visible.sync=\"editRoleDialogVisible\" :close-on-click-modal=\"false\" @close=\"editRoleDialogClosed\">\r\n      <!--内容主体-->\r\n      <el-form :model=\"editRoleForm\" :rules=\"editRoleFormRules\" ref=\"editRoleFormRef\" label-width=\"80px\">\r\n        <el-form-item label=\"角色名称\" prop=\"roleName\">\r\n          <el-input v-model=\"editRoleForm.roleName\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"角色描述\" prop=\"roleDesc\">\r\n          <el-input v-model=\"editRoleForm.roleDesc\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <!--底部-->\r\n      <span slot=\"footer\">\r\n        <el-button @click=\"editRoleDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"editRole\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- 分配权限的对话框 -->\r\n    <el-dialog title=\"分配权限\" :visible.sync=\"setRightDialogVisible\" width=\"50%\" @close=\"setRightDialogClosed\">\r\n      <!-- 树形组件\r\n    show-checkbox:显示复选框\r\n    node-key:设置选中节点对应的值\r\n    default-expand-all:是否默认展开所有节点\r\n    :default-checked-keys 设置默认选中项的数组\r\n    ref:设置引用 -->\r\n      <el-tree :data=\"rightslist\" :props=\"treeProps\" show-checkbox node-key=\"id\" default-expand-all :default-checked-keys=\"defKeys\" ref=\"treeRef\"></el-tree>\r\n      <!--底部-->\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"setRightDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"allotRights\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 所有角色列表数据\r\n      rolelist: [],\r\n      // 控制分配权限对话框的显示与隐藏\r\n      setRightDialogVisible: false,\r\n      // 所有权限的数据\r\n      rightslist: [],\r\n      // 树形控件的属性绑定对象\r\n      treeProps: {\r\n        label: 'authName',\r\n        children: 'children'\r\n      },\r\n      // 默认选中的节点Id值数组\r\n      defKeys: [],\r\n      // 当前即将分配权限的角色id\r\n      roleId: '',\r\n      // 添加角色对话框的显示状态\r\n      addRoleDialogVisible: false,\r\n      // 修改角色对话框的显示状态\r\n      editRoleDialogVisible: false,\r\n      // 添加角色的表单数据\r\n      addRoleForm: {\r\n        roleName: '',\r\n        roleDesc: ''\r\n      },\r\n      // 添加角色表单的验证规则对象\r\n      addRoleFormRules: {\r\n        roleName: [{ required: true, message: '请输入角色名称', trigger: 'blur' }],\r\n        roleDesc: [{ required: true, message: '请输入角色描述', trigger: 'blur' }]\r\n      },\r\n      // 修改角色的表单数据\r\n      editRoleForm: {\r\n        roleName: '',\r\n        roleDesc: ''\r\n      },\r\n      // 修改角色表单的验证规则对象\r\n      editRoleFormRules: {\r\n        roleName: [{ required: true, message: '请输入角色名称', trigger: 'blur' }],\r\n        roleDesc: [{ required: true, message: '请输入角色描述', trigger: 'blur' }]\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getRolesList()\r\n  },\r\n  methods: {\r\n    // 获取所有角色的列表\r\n    async getRolesList() {\r\n      const { data: res } = await this.$http.get('roles')\r\n\r\n      if (res.meta.status !== 200) {\r\n        return this.$message.error('获取角色列表失败！')\r\n      }\r\n      // 如果返回状态正常，将请求的数据保存在data中\r\n      this.rolelist = res.data\r\n\r\n      // console.log(this.rolelist)\r\n    },\r\n    // 根据Id删除对应的权限\r\n    async removeRightById(role, rightId) {\r\n      // 弹框提示用户是否用删除\r\n      const confirmResult = await this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\r\n        confirmButtonText: '确认删除',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).catch(err => err)\r\n\r\n      if (confirmResult !== 'confirm') {\r\n        return this.$message.info('取消了删除!')\r\n      }\r\n\r\n      // 用户点击了确定表示真的要删除\r\n      // 当发送delete请求之后，返回的数据就是最新的角色权限信息\r\n      // console.log('确认了删除')\r\n      const { data: res } = await this.$http.delete(`roles/${role.id}/rights/${rightId}`)\r\n      // 如果用户点击确认，则confirmResult 为'confirm'\r\n      // 如果用户点击取消, 则confirmResult获取的就是catch的错误消息'cancel'\r\n      if (res.meta.status !== 200) {\r\n        return this.$message.error('删除权限失败!')\r\n      }\r\n\r\n      // this.getRolesList()\r\n      role.children = res.data\r\n    },\r\n    // 展示分配权限的对话框\r\n    async showSetRightDialog(role) {\r\n      // console.log(role)\r\n      // 将role.id保存起来以供保存权限时使用\r\n      this.roleId = role.id\r\n      // 获取所有权限的数据\r\n      const { data: res } = await this.$http.get('rights/tree')\r\n      // 如果返回状态为异常状态则报错并返回\r\n      if (res.meta.status !== 200) {\r\n        return this.$message.error('获取权限数据失败!')\r\n      }\r\n\r\n      // 把获取到的权限数据保存到 data 中\r\n      this.rightslist = res.data\r\n      // console.log(this.rightslist)\r\n\r\n      // 递归获取三级节点的Id\r\n      this.getLeafKeys(role, this.defKeys)\r\n\r\n      // 如果返回状态正常，将请求的数据保存在data中\r\n      this.setRightDialogVisible = true\r\n    },\r\n    // 通过递归的形式，获取角色下所有三级权限的id，并保存到 defKeys 数组中\r\n    getLeafKeys(node, arr) {\r\n      // 该函数会获取到当前角色的所有三级权限id并添加到defKeys中\r\n      // 如果当前节点不包含children属性，则表示node为三级权限\r\n      if (!node.children) {\r\n        return arr.push(node.id)\r\n      }\r\n      // 递归调用\r\n      node.children.forEach(item => this.getLeafKeys(item, arr))\r\n    },\r\n    // 监听分配权限对话框的关闭事件\r\n    setRightDialogClosed() {\r\n      this.defKeys = []\r\n    },\r\n    // 点击为角色分配权限\r\n    async allotRights() {\r\n      const keys = [...this.$refs.treeRef.getCheckedKeys(), ...this.$refs.treeRef.getHalfCheckedKeys()]\r\n\r\n      const idStr = keys.join(',')\r\n\r\n      const { data: res } = await this.$http.post(`roles/${this.roleId}/rights`, { rids: idStr })\r\n\r\n      if (res.meta.status !== 200) {\r\n        return this.$message.error('分配权限失败!')\r\n      }\r\n\r\n      this.$message.success('分配权限成功！')\r\n      this.getRolesList()\r\n      this.setRightDialogVisible = false\r\n    },\r\n    // 添加角色对话框的关闭事件\r\n    addRoleDialogClosed() {\r\n      this.$refs.addRoleFormRef.resetFields()\r\n    },\r\n    // 确认添加角色\r\n    addRole() {\r\n      this.$refs.addRoleFormRef.validate(async valid => {\r\n        if (!valid) {\r\n          return this.$message.error('请填写必要的角色信息!')\r\n        }\r\n\r\n        // 发起请求添加角色\r\n        // 商品的名称必须是唯一的\r\n        const { data: res } = await this.$http.post('roles', this.addRoleForm)\r\n        if (res.meta.status !== 201) {\r\n          return this.$message.error('添加角色失败!')\r\n        }\r\n\r\n        this.getRolesList()\r\n        this.$message.success('添加角色成功!')\r\n        this.addRoleDialogVisible = false\r\n      })\r\n    },\r\n    // 展示编辑角色的对话框\r\n    async showEditDialog(id) {\r\n      const { data: res } = await this.$http.get(`roles/${id}`)\r\n      if (res.meta.status !== 200) {\r\n        return this.$message.error('查询角色信息失败！')\r\n      }\r\n\r\n      this.editRoleForm = res.data\r\n      // console.log(this.editRoleForm)\r\n      this.editRoleDialogVisible = true\r\n    },\r\n    // 修改角色对话框的关闭事件\r\n    editRoleDialogClosed() {\r\n      this.$refs.editRoleFormRef.resetFields()\r\n    },\r\n    // 确认修改角色\r\n    editRole() {\r\n      this.$refs.editRoleFormRef.validate(async valid => {\r\n        if (!valid) return\r\n        // console.log(this.editRoleForm.roleId)\r\n        const { data: res } = await this.$http.put(`roles/${this.editRoleForm.roleId}`, this.editRoleForm)\r\n\r\n        if (res.meta.status !== 200) {\r\n          return this.$message.error('编辑角色失败!')\r\n        }\r\n\r\n        this.getRolesList()\r\n        this.$message.success('编辑角色成功!')\r\n        // 隐藏对话框\r\n        this.editRoleDialogVisible = false\r\n      })\r\n    },\r\n    // 根据id删除对应的角色\r\n    async removeRoleById(id) {\r\n      const confirmResult = await this.$confirm('此操作将永久删除该角色, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).catch(err => err)\r\n\r\n      // 如果用户确认删除，则返回值为字符串 confirm\r\n      // 如果用户取消了删除，则返回值为字符串 cancel\r\n      // console.log(confirmResult)\r\n      if (confirmResult !== 'confirm') {\r\n        return this.$message.info('已取消删除')\r\n      }\r\n\r\n      const { data: res } = await this.$http.delete(`roles/${id}`)\r\n\r\n      if (res.meta.status !== 200) {\r\n        return this.$message.error('删除角色失败！')\r\n      }\r\n\r\n      this.$message.success('删除角色成功！')\r\n      this.getRolesList()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.el-tag {\r\n  margin: 7px;\r\n}\r\n\r\n.bdtop {\r\n  border-top: 1px solid #eee;\r\n}\r\n\r\n.bdbottom {\r\n  border-bottom: 1px solid #eee;\r\n}\r\n\r\n.vcenter {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Roles.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Roles.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Roles.vue?vue&type=template&id=23b802ba&scoped=true&\"\nimport script from \"./Roles.vue?vue&type=script&lang=js&\"\nexport * from \"./Roles.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Roles.vue?vue&type=style&index=0&id=23b802ba&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"23b802ba\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Roles.vue?vue&type=style&index=0&id=23b802ba&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"权限管理\")]),_c('el-breadcrumb-item',[_vm._v(\"权限列表\")])],1),_c('el-card',[_c('el-table',{attrs:{\"data\":_vm.rightsList,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\"}}),_c('el-table-column',{attrs:{\"label\":\"权限名称\",\"prop\":\"authName\"}}),_c('el-table-column',{attrs:{\"label\":\"路径\",\"prop\":\"path\"}}),_c('el-table-column',{attrs:{\"label\":\"权限等级\",\"prop\":\"level\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.level === '0')?_c('el-tag',[_vm._v(\"一级\")]):(scope.row.level === '1')?_c('el-tag',{attrs:{\"type\":\"success\"}},[_vm._v(\"二级\")]):_c('el-tag',{attrs:{\"type\":\"warning\"}},[_vm._v(\"三级\")])]}}])})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 面包屑导航区 -->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>权限管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>权限列表</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n\r\n    <!-- 卡片视图区域 -->\r\n    <el-card>\r\n      <el-table :data=\"rightsList\" border stripe>\r\n        <el-table-column type=\"index\"></el-table-column>\r\n        <el-table-column label=\"权限名称\" prop=\"authName\"></el-table-column>\r\n        <el-table-column label=\"路径\" prop=\"path\"></el-table-column>\r\n        <el-table-column label=\"权限等级\" prop=\"level\">\r\n          <template slot-scope=\"scope\">\r\n            <el-tag v-if=\"scope.row.level === '0'\">一级</el-tag>\r\n            <el-tag type=\"success\" v-else-if=\"scope.row.level === '1'\">二级</el-tag>\r\n            <el-tag type=\"warning\" v-else>三级</el-tag>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 列表形式的权限\r\n      rightsList: []\r\n    }\r\n  },\r\n  created() {\r\n    // 获取所有的权限\r\n    this.getRightsList()\r\n  },\r\n  methods: {\r\n    // 获取权限列表\r\n    async getRightsList() {\r\n      const { data: res } = await this.$http.get('rights/list')\r\n      // 如果返回状态为异常状态则报错并返回\r\n      if (res.meta.status !== 200) {\r\n        return this.$message.error('获取权限列表失败')\r\n      }\r\n      // 如果返回状态正常，将请求的数据保存在data中\r\n      this.rightsList = res.data\r\n      //   console.log(this.rightsList)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped></style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Rights.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Rights.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Rights.vue?vue&type=template&id=1d7f67a6&scoped=true&\"\nimport script from \"./Rights.vue?vue&type=script&lang=js&\"\nexport * from \"./Rights.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1d7f67a6\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}